<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Employer Dashboard - JobPortal</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <style>
      /* Add these styles for the application cards */
      .application-card {
        background-color: white;
        border-radius: 8px;
        padding: 1.5rem;
        margin-bottom: 1rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        border-left: 4px solid var(--primary);
      }

      .applicant-info {
        margin: 1rem 0;
        padding: 1rem;
        background-color: #f8fafc;
        border-radius: 6px;
      }

      .application-actions {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
      }

      .btn-danger {
        background-color: var(--danger);
        color: white;
      }

      .btn-danger:hover {
        background-color: #dc2626;
      }

      .status-pending {
        color: var(--secondary);
      }

      .status-accepted {
        color: var(--success);
      }

      .status-rejected {
        color: var(--danger);
      }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background-color: #f5f5f5;
        color: #333;
      }

      .dashboard-container {
        display: flex;
        min-height: 100vh;
      }

      .sidebar {
        width: 250px;
        background-color: #2c3e50;
        color: white;
        padding: 20px 0;
      }

      .profile {
        text-align: center;
        padding: 20px;
        border-bottom: 1px solid #34495e;
      }

      .avatar {
        width: 80px;
        height: 80px;
        background-color: #34495e;
        border-radius: 50%;
        margin: 0 auto 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 30px;
      }

      nav ul {
        list-style: none;
        padding: 20px 0;
      }

      nav li {
        margin-bottom: 5px;
      }

      nav a {
        color: white;
        text-decoration: none;
        padding: 10px 20px;
        display: block;
        transition: all 0.3s;
      }

      nav a:hover,
      nav li.active a {
        background-color: #34495e;
      }

      nav i {
        margin-right: 10px;
        width: 20px;
        text-align: center;
      }

      .main-content {
        flex: 1;
        padding: 20px;
      }

      .dashboard-header {
        background-color: white;
        padding: 20px;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }

      .stats {
        display: flex;
        gap: 20px;
        margin-top: 20px;
      }

      .stat-card {
        background-color: #3498db;
        color: white;
        padding: 15px;
        border-radius: 5px;
        text-align: center;
        flex: 1;
      }

      .dashboard-section {
        background-color: white;
        padding: 20px;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }

      .form-group {
        margin-bottom: 15px;
      }

      label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
      }

      input,
      textarea,
      select {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 16px;
      }

      textarea {
        resize: vertical;
      }

      .form-row {
        display: flex;
        gap: 20px;
      }

      .form-row .form-group {
        flex: 1;
      }

      .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
        transition: background-color 0.3s;
      }

      .btn-primary {
        background-color: #3498db;
        color: white;
      }

      .btn-primary:hover {
        background-color: #2980b9;
      }

      .job-listings,
      .applications-list {
        display: grid;
        gap: 15px;
      }

      .job-card,
      .application-card {
        background-color: #f9f9f9;
        padding: 15px;
        border-radius: 5px;
        border-left: 4px solid #3498db;
      }

      .status-pending {
        color: #f39c12;
      }

      .status-accepted {
        color: #2ecc71;
      }

      .status-rejected {
        color: #e74c3c;
      }
    </style>
  </head>
  <body>
    <div class="dashboard-container">
      <aside class="sidebar">
        <div class="profile">
          <div class="avatar">
            <i class="fas fa-building"></i>
          </div>
          <h3 id="userName">Company Name</h3>
          <p>Employer</p>
        </div>
        <nav>
          <ul>
            <li class="active">
              <a href="#"><i class="fas fa-home"></i> Dashboard</a>
            </li>
            <li>
              <a href="#post-job"
                ><i class="fas fa-plus-circle"></i> Post a Job</a
              >
            </li>
            <li>
              <a href="#manage-jobs"
                ><i class="fas fa-briefcase"></i> Manage Jobs</a
              >
            </li>
            <li>
              <a href="#applications"
                ><i class="fas fa-file-alt"></i> Applications</a
              >
            </li>
            <li>
              <a href="#profile"
                ><i class="fas fa-user-cog"></i> Company Profile</a
              >
            </li>
            <li>
              <a href="#" id="logout"
                ><i class="fas fa-sign-out-alt"></i> Logout</a
              >
            </li>
          </ul>
        </nav>
      </aside>

      <main class="main-content">
        <header class="dashboard-header">
          <h1>Employer Dashboard</h1>
          <div class="stats">
            <div class="stat-card">
              <h3>12</h3>
              <p>Active Jobs</p>
            </div>
            <div class="stat-card">
              <h3>45</h3>
              <p>Applications</p>
            </div>
          </div>
        </header>

        <!-- Company Profile Section -->
        <section id="profile" class="dashboard-section">
          <h2>Company Profile</h2>
          <form id="companyProfileForm">
            <div class="form-group">
              <label for="companyName">Company Name</label>
              <input type="text" id="companyName" required />
            </div>
            <div class="form-group">
              <label for="companyDescription">Company Description</label>
              <textarea id="companyDescription" rows="5" required></textarea>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="companyPhone">Phone Number</label>
                <input type="tel" id="companyPhone" required />
              </div>
              <div class="form-group">
                <label for="companyLocation">Location</label>
                <input type="text" id="companyLocation" required />
              </div>
            </div>
            <div class="form-group">
              <label for="companyWebsite">Website (optional)</label>
              <input type="url" id="companyWebsite" />
            </div>
            <button type="submit" class="btn btn-primary">Save Profile</button>
          </form>
        </section>

        <!-- Post Job Section -->
        <section id="post-job" class="dashboard-section">
          <h2>Post a New Job</h2>
          <form id="postJobForm">
            <div class="form-group">
              <label for="jobTitle">Job Title</label>
              <input type="text" id="jobTitle" required />
            </div>
            <div class="form-group">
              <label for="jobDescription">Job Description</label>
              <textarea id="jobDescription" rows="5" required></textarea>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="jobLocation">Location</label>
                <input type="text" id="jobLocation" required />
              </div>
              <div class="form-group">
                <label for="jobSalary">Salary</label>
                <input type="text" id="jobSalary" required />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="jobType">Job Type</label>
                <select id="jobType" required>
                  <option value="full-time">Full-time</option>
                  <option value="part-time">Part-time</option>
                  <option value="freelancer">Freelancer</option>
                  <option value="contract">Contract</option>
                  <option value="internship">Internship</option>
                </select>
              </div>
              <div class="form-group">
                <label for="jobStatus">Status</label>
                <select id="jobStatus" required>
                  <option value="pending">Pending</option>
                  <option value="accept">Accept</option>
                  <option value="reject">Reject</option>
                </select>
              </div>
            </div>
            <button type="submit" class="btn btn-primary">Post Job</button>
          </form>
        </section>

        <!-- Manage Jobs Section -->
        <section id="manage-jobs" class="dashboard-section">
          <h2>Your Job Listings</h2>
          <div class="job-listings">
            <!-- Sample job listing - would be populated by JavaScript -->
            <div class="job-card">
              <h3>Senior Web Developer</h3>
              <p>
                We're looking for an experienced web developer to join our
                team...
              </p>
              <div class="form-row">
                <p><strong>Location:</strong> New York, NY</p>
                <p><strong>Salary:</strong> $90,000 - $110,000</p>
              </div>
              <div class="form-row">
                <p><strong>Type:</strong> Full-time</p>
                <p>
                  <strong>Status:</strong>
                  <span class="status-pending">Pending</span>
                </p>
              </div>
            </div>
          </div>
        </section>

        <!-- Add this to the applications section -->
        <section id="applications" class="dashboard-section">
          <h2><i class=""></i> Applications Received</h2>
          <div class="applications-list" id="applicationsList">
            <!-- Applications will be populated here -->
          </div>
        </section>

        <!-- Applications Section -->
        <section id="applications" class="dashboard-section">
          <h2>Applications Received</h2>
          <div class="applications-list">
            <!-- Sample application - would be populated by JavaScript -->
            <div class="application-card">
              <h3>John Doe - Senior Web Developer</h3>
              <p><strong>Applied:</strong> June 15, 2023</p>
              <p>
                <strong>Status:</strong>
                <span class="status-pending">Pending Review</span>
              </p>
              <button class="btn btn-primary" style="margin-top: 10px">
                View Application
              </button>
            </div>
          </div>
        </section>
      </main>
    </div>

    <script>
      // employer.html
      document.addEventListener("DOMContentLoaded", function () {
        // Load existing jobs from localStorage
        let jobs = JSON.parse(localStorage.getItem("jobs")) || [];

        // Handle job posting form
        document
          .getElementById("postJobForm")
          .addEventListener("submit", function (e) {
            e.preventDefault();

            const newJob = {
              id: Date.now(), // Unique ID
              title: document.getElementById("jobTitle").value,
              description: document.getElementById("jobDescription").value,
              location: document.getElementById("jobLocation").value,
              salary: document.getElementById("jobSalary").value,
              type: document.getElementById("jobType").value,
              status: "open", // Default status
              company:
                document.getElementById("companyName").value || "My Company",
              postedDate: new Date().toLocaleDateString(),
            };

            // Add to jobs array
            jobs.push(newJob);

            // Save to localStorage
            localStorage.setItem("jobs", JSON.stringify(jobs));

            // Update the employer's job listings
            updateEmployerJobListings();

            alert("Job posted successfully!");
            this.reset();
          });

        // Function to update employer's job listings
        function updateEmployerJobListings() {
          const container = document.querySelector(
            "#manage-jobs .job-listings"
          );
          container.innerHTML = "";

          jobs.forEach((job) => {
            const jobCard = document.createElement("div");
            jobCard.className = "job-card";
            jobCard.innerHTML = `
              <h3>${job.title}</h3>
              <p>${job.description}</p>
              <div class="form-row">
                <p><strong>Location:</strong> ${job.location}</p>
                <p><strong>Salary:</strong> ${job.salary}</p>
              </div>
              <div class="form-row">
                <p><strong>Type:</strong> ${job.type}</p>
                <p><strong>Status:</strong> <span class="status-${job.status}">${job.status}</span></p>
              </div>
            `;
            container.appendChild(jobCard);
          });
        }

        // Initialize employer job listings
        updateEmployerJobListings();
      });
      // Simple form handling for demonstration
      document
        .getElementById("companyProfileForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          alert("Company profile saved successfully!");
          // In a real app, you would send this data to your backend
        });

      // Add this function to display applications
      function updateEmployerApplications() {
        const container = document.getElementById("applicationsList");
        container.innerHTML = "";

        // Get all applications
        const applications =
          JSON.parse(localStorage.getItem("applications")) || [];

        // Get current employer's jobs (assuming company name is unique identifier)
        const jobs = JSON.parse(localStorage.getItem("jobs")) || [];
        const companyName = document.getElementById("companyName").value;
        const employerJobs = jobs.filter((job) => job.company === companyName);

        // Filter applications for this employer's jobs
        const employerApplications = applications.filter((app) =>
          employerJobs.some(
            (job) => job.title === app.title && job.company === app.company
          )
        );

        employerApplications.forEach((app) => {
          const card = document.createElement("div");
          card.className = "application-card";
          card.innerHTML = `
      <h3>${app.seekerName} - ${app.title}</h3>
      <p><strong>Company:</strong> ${app.company}</p>
      <p><strong>Applied:</strong> ${app.appliedDate}</p>
      <p><strong>Status:</strong> 
        <span class="status-${app.status}">${app.status}</span>
      </p>
      <div class="applicant-info">
        <p><strong>Email:</strong> ${app.seekerEmail}</p>
        <p><strong>Phone:</strong> ${app.seekerPhone}</p>
      </div>
      <div class="application-actions">
        <button class="btn btn-primary accept-btn" data-app-id="${app.id}">
          Accept
        </button>
        <button class="btn btn-danger reject-btn" data-app-id="${app.id}">
          Reject
        </button>
      </div>
    `;
          container.appendChild(card);
        });

        // Add event listeners for accept/reject buttons
        document.querySelectorAll(".accept-btn").forEach((btn) => {
          btn.addEventListener("click", function () {
            updateApplicationStatus(
              this.getAttribute("data-app-id"),
              "accepted"
            );
          });
        });

        document.querySelectorAll(".reject-btn").forEach((btn) => {
          btn.addEventListener("click", function () {
            updateApplicationStatus(
              this.getAttribute("data-app-id"),
              "rejected"
            );
          });
        });
      }

      // Add this function to update application status
      function updateApplicationStatus(appId, status) {
        const applications =
          JSON.parse(localStorage.getItem("applications")) || [];
        const updatedApplications = applications.map((app) => {
          if (app.id == appId) {
            return { ...app, status: status };
          }
          return app;
        });

        localStorage.setItem(
          "applications",
          JSON.stringify(updatedApplications)
        );
        updateEmployerApplications();

        // In a real app, you would notify the seeker here
        alert(`Application status updated to ${status}`);
      }

      // Call this when the page loads and whenever applications might change
      document.addEventListener("DOMContentLoaded", function () {
        updateEmployerApplications();

        // Also update when navigating to applications section
        document
          .querySelector('[href="#applications"]')
          .addEventListener("click", updateEmployerApplications);
      });

      document
        .getElementById("postJobForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          alert("Job posted successfully!");
          // In a real app, you would send this data to your backend
        });

      // Navigation highlighting
      document.querySelectorAll("nav a").forEach((link) => {
        link.addEventListener("click", function () {
          document
            .querySelectorAll("nav li")
            .forEach((li) => li.classList.remove("active"));
          this.parentElement.classList.add("active");

          // Hide all sections
          document.querySelectorAll(".dashboard-section").forEach((section) => {
            section.style.display = "none";
          });

          // Logout functionality
document.getElementById('logout').addEventListener('click', function(e) {
    e.preventDefault();
    // Clear any user session data if needed
    localStorage.removeItem('currentEmployer');
    // Redirect to login page
    window.location.href = 'login.html'; // Change to your actual login page URL
});

          // Show the selected section
          const target = this.getAttribute("href");
          if (target && target.startsWith("#")) {
            document.querySelector(target).style.display = "block";
          }
        });
      });

      // Show dashboard by default
      document.querySelector("nav li.active a").click();
    </script>
  </body>
</html>
